clc;
clear;
close all;

tran = [-0.7; 0; 0];
h = 4;
feature_i = [0 0 0; 0 10 0; 10 10 0; 10 15 0; 0 15 0; 0 25 0; 25 25 0; ...
    25 15 0; 16 15 0; 16 10 0; 25 10 0; 25 0 0; ...
    0 0 h; 0 10 h; 10 10 h; 10 15 h; 0 15 h; 0 25 h; 25 25 h; ...
    25 15 h; 16 15 h; 16 10 h; 25 10 h; 25 0 h;...
    5 0 0; 5 1 0; 5 1 h; 5 0 h;...
    20 24 0; 20 25 0; 20 25 h; 20 24 h;...
    5 25 0; 5 50 0; 0 50 0; 0 60 0; 15 60 0; 15 70 0; 25 70 0;...
    25 40 0; 15 40 0; 15 50 0; 10 50 0; 10 25 0;...
    5 25 h; 5 50 h; 0 50 h; 0 60 h; 15 60 h; 15 70 h; 25 70 h;...
    25 40 h; 15 40 h; 15 50 h; 10 50 h; 10 25 h]/2 + tran';

trans = [-0.7; 0; 0];
h2 = 2;
feature = [[0 0 0; 0 10 0; 10 10 0; 10 15 0; 0 15 0; 0 25 0; 25 25 0;...
    25 15 0; 16 15 0; 16 10 0; 25 10 0; 25 0 0; ...
    0 0 h2; 0 10 h2; 10 10 h2; 10 15 h2; 0 15 h2; 0 25 h2; 25 25 h2; ...
    25 15 h2; 16 15 h2; 16 10 h2; 25 10 h2; 25 0 h2;...
    5 0 0; 5 1 0; 5 1 h2; 5 0 h2;...
    20 24 0; 20 25 0; 20 25 h2; 20 24 h2;...
    5 25 0; 5 50 0; 0 50 0; 0 60 0; 15 60 0; 15 70 0; 25 70 0;...
    25 40 0; 15 40 0; 15 50 0; 10 50 0; 10 25 0;...
    5 25 h2; 5 50 h2; 0 50 h2; 0 60 h2; 15 60 h2; 15 70 h2; 25 70 h2;...
    25 40 h2; 15 40 h2; 15 50 h2; 10 50 h2; 10 25 h2;...
    12 0 h2; 12 25 h2;]/2;...
    2.5 15 h2/2; 5 20 h2/2] + trans';
feature = feature';
plot3(feature_i(:, 1), feature_i(:, 2), feature_i(:, 3), 'b.');
hold on;
for i = 1:length(feature_i)
    s = num2str(i);
    text(feature_i(i, 1)+0.1, feature_i(i, 2)+0.1, feature_i(i, 3)+0.1, s, 'color', 'r');
end
tri1 = [1 2 12; 2 12 11; 3 4 10; 4 9 10; 5 6 7; 5 7 8;...
    1 2 13; 2 13 14; 2 3 14; 3 14 15; 3 4 15; 4 15 16; 4 5 16; 5 16 17; 5 6 17; 6 17 18;...
%     6 7 18; 7 18 19; 
    7 8 19; 8 19 20; 8 9 20; 9 20 21; 9 10 21; 10 21 22; 10 11 22; 11 22 23;...
    11 12 23; 12 23 24; 1 12 13; 12 13 24;...
    25 26 27; 25 27 28; 29 30 31; 29 31 32;...
    6 18 33; 18 33 45; 33 34 46; 33 45 46; 34 35 47; 34 46 47; 35 36 47; 36 47 48; ...
    36 37 48; 37 48 49; 37 38 49; 38 49 50; 38 39 50; 39 50 51; 39 40 51; 40 51 52;...
    40 41 52; 41 52 53; 41 42 53; 42 53 54; 42 43 54; 43 55 54; ...
    43 44 55; 44 55 56; 7 19 44; 19 44 56;...
    33 34 43; 33 43 44; 35 36 37; 35 37 42; 38 39 40; 38 40 41];
% tri_ = [41 42 53; 42 53 54; 42 43 54; 43 55 54; ...
%     43 44 55; 44 55 56; 7 19 44; 19 44 56];
tri_ = [3 4 6; 4 7 6; ...
    4 5 7; 5 7 8; 1 2 5; 2 5 8;...
    9 10 13; 10 13 14; 10 11 14; 11 14 15; 11 12 15; 12 15 16];
feature_ = feature_i([7,19,42,43,44,54,55,56, 6,33,34,35,18,45,46,47], :);
% tri_ = [3 4 7; 4 7 8; 4 5 8; 5 9 8; ...
%     5 6 9; 6 9 10; 1 2 6; 2 6 10];
% feature_ = feature_i([7,19,41,42,43,44,53,54,55,56], :);
% tri2 = [1 2 12; 2 12 11; 3 4 10; 4 9 10; 5 6 7; 5 7 8;...
%     33 34 43; 33 43 44; 35 36 37; 35 37 42; 38 39 40; 38 40 41];
% tri3 = [1 2 13; 2 13 14; 2 3 14; 3 14 15; 3 4 15; 4 15 16; 4 5 16; 5 16 17; 5 6 17; 6 17 18;...
%     6 18 33; 18 33 45; 33 34 46; 33 45 46; 34 35 47; 34 46 47; 35 36 47; 36 47 48; ...
%     36 37 48; 37 48 49; 37 38 49; 38 49 50; ];
% tri4 = [7 8 19; 8 19 20; 8 9 20; 9 20 21; 9 10 21; 10 21 22; 10 11 22; 11 22 23;...
%     11 12 23; 12 23 24; 1 12 13; 12 13 24;...
%     43 44 55; 44 55 56; 7 19 44; 19 44 56];
% tri5 = [38 39 50; 39 50 51; 39 40 51; 40 51 52;...
%     40 41 52; 41 52 53; 41 42 53; 42 53 54; 42 43 54; 43 55 54; ...
%     ];
% tri6 = [25 26 27; 25 27 28; 29 30 31; 29 31 32];

% figure(2)
trisurf(tri1, feature_i(:, 1), feature_i(:, 2), feature_i(:, 3));
trisurf(tri_, feature_(:, 1), feature_(:, 2), feature_(:, 3));
% trisurf(tri2, feature_i(:, 1), feature_i(:, 2), feature_i(:, 3));
% trisurf(tri3, feature_i(:, 1), feature_i(:, 2), feature_i(:, 3));
% trisurf(tri4, feature_i(:, 1), feature_i(:, 2), feature_i(:, 3));
% trisurf(tri5, feature_i(:, 1), feature_i(:, 2), feature_i(:, 3));
% trisurf(tri6, feature_i(:, 1), feature_i(:, 2), feature_i(:, 3));

M = length(feature(1, :));
id1 = 1:length(feature_i(:, 1));
vertex = feature_i';
% feature_ = [10 40 6; 15 30 6; 0 40 6; 0 30 6]';

goalx = -1:1.5:13;
goaly = -0.7:1.5:35;
goalz = [0.5,0.75];
% goalx = -1:3:26;
% goaly = -1:3:71;
% goalz = 2:2:6;
unknown = [];
for x = 1:length(goalx)
    for y = 1:length(goaly)
        for z = 1:length(goalz)
            unknown = [unknown, [x; y; z]];
        end
    end
end
save dataFeature1 M feature id1 tri1 goalx goaly goalz unknown feature_ tri_ vertex
% 
% axis([-4 4 -4 4 -4 4]);